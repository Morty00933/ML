# üß© Mini-ML Platform

–ú–∏–Ω–∏-–æ–±–ª–∞—á–Ω–∞—è ML-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –∞–Ω–∞–ª–æ–≥ AWS SageMaker), –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ Docker Compose.  
–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π ML lifecycle: **–æ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–æ –æ–±—É—á–µ–Ω–∏—è, –¥–µ–ø–ª–æ—è, –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**.  

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ü—Ä–æ–µ–∫—Ç—ã –∏ –¥–∞—Ç–∞—Å–µ—Ç—ã**: REST API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö (—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ MinIO/S3).
- **–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π**: –∑–∞–ø—É—Å–∫ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ —Å Optuna, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ MLflow.
- **Model Registry**: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–¥–∏—è–º–∏ (Staging / Production).
- **–î–µ–ø–ª–æ–π**: REST API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π inference-—Å–µ—Ä–≤–∏—Å.
- **–ò–Ω—Ñ–µ—Ä–µ–Ω—Å**: –æ–Ω–ª–∞–π–Ω-–ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —á–µ—Ä–µ–∑ FastAPI endpoint.
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ API –∏ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞, Grafana –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∞—à–±–æ—Ä–¥—ã.
- **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è**: Prefect –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ –∏ –∞–≤—Ç–æ–ø–∞–π–ø–ª–∞–π–Ω–∞–º–∏.
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –≤—Å—ë —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π —á–µ—Ä–µ–∑ Docker Compose.

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ services/                # –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ api/                 # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏, –¥–∞—Ç–∞—Å–µ—Ç–∞–º–∏, —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π –∏ –¥–µ–ø–ª–æ–µ–º
‚îÇ   ‚îú‚îÄ‚îÄ training/            # –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (Optuna + MLflow)
‚îÇ   ‚îî‚îÄ‚îÄ inference/           # –ò–Ω—Ñ–µ—Ä–µ–Ω—Å —Å–µ—Ä–≤–∏—Å (FastAPI + MLflow)
‚îÇ
‚îú‚îÄ‚îÄ infra/                   # –ö–æ–Ω—Ñ–∏–≥–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ monitoring/              # Prometheus –∏ Grafana –¥–∞—à–±–æ—Ä–¥—ã
‚îú‚îÄ‚îÄ data/samples/            # –ü—Ä–∏–º–µ—Ä –¥–∞—Ç–∞—Å–µ—Ç–∞ (iris.csv)
‚îú‚îÄ‚îÄ docker-compose.yml       # –û–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ .env.example             # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md
```

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

| –°–µ—Ä–≤–∏—Å      | –ü–æ—Ä—Ç         | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|-------------|----------|
| **API** (FastAPI)      | http://localhost:8000/docs | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏, –¥–∞—Ç–∞—Å–µ—Ç–∞–º–∏, —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π –∏ –¥–µ–ø–ª–æ–µ–º |
| **Training** (FastAPI) | http://localhost:8001/docs | –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π |
| **Inference** (FastAPI) | http://localhost:8080/docs | –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è |
| **MLflow**   | http://localhost:5001 | –¢—Ä–µ–∫–∏–Ω–≥ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –∏ Model Registry |
| **MinIO**    | http://localhost:9001 | S3-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (–ª–æ–≥–∏–Ω: `minio`, –ø–∞—Ä–æ–ª—å: `minio12345`) |
| **Postgres** | localhost:5432 | –ë–∞–∑–∞ –¥–ª—è MLflow |
| **Prefect**  | http://localhost:4200 | –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á |
| **Prometheus** | http://localhost:9090 | –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ |
| **Grafana**  | http://localhost:3000 | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ |

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/Morty00933/ML.git
cd ML
```

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```bash
cp .env.example .env
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

```bash
docker compose up -d --build
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å

```bash
docker compose ps
```

---

## üìä –ü—Ä–∏–º–µ—Ä: –æ–±—É—á–µ–Ω–∏–µ –∏ –¥–µ–ø–ª–æ–π Iris –º–æ–¥–µ–ª–∏

### 1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
```bash
curl -X POST http://localhost:8000/projects   -H "X-API-Key: admin-key-123"   -H "Content-Type: application/json"   -d '{"name":"demo"}'
```

### 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞—Ç–∞—Å–µ—Ç
```bash
curl -X POST "http://localhost:8000/datasets/upload?project=demo"   -H "X-API-Key: engineer-key-123"   -F "file=@data/samples/iris.csv"
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ
```bash
curl -X POST http://localhost:8000/experiments/train   -H "X-API-Key: engineer-key-123"   -H "Content-Type: application/json"   -d '{
    "project":"demo",
    "dataset_s3_uri":"s3://mlflow/projects/demo/datasets/iris.csv",
    "target":"target",
    "model_name":"demo-iris",
    "test_size":0.2,
    "max_trials":6
  }'
```

### 4. –î–µ–ø–ª–æ–π–Ω—É—Ç—å –º–æ–¥–µ–ª—å
```bash
curl -X POST http://localhost:8000/deploy   -H "X-API-Key: admin-key-123"   -H "Content-Type: application/json"   -d '{"model_name":"demo-iris","stage":"Staging"}'
```

### 5. –°–¥–µ–ª–∞—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ
```bash
curl -X POST http://localhost:8080/predict   -H "Content-Type: application/json"   -d '{"rows":[{"sepal_length":5.1,"sepal_width":3.5,"petal_length":1.4,"petal_width":0.2}]}'
```

üëâ –û—Ç–≤–µ—Ç:
```json
{"preds":["Iris-setosa"]}
```

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏
- API: `http://localhost:8000/metrics`
- Inference: `http://localhost:8080/metrics`

### Grafana –¥–∞—à–±–æ—Ä–¥—ã:
- Requests per second
- p95 latency
- Errors per second
- Total requests

### –ü—Ä–∏–º–µ—Ä:
- API –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞ ‚Üí –≥—Ä–∞—Ñ–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ latency  
- Inference ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –∏ –æ—à–∏–±–∫–∏  

---

## üîë –†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø

| –†–æ–ª—å       | API Key         | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ |
|------------|----------------|-------------|
| **admin**  | `admin-key-123`   | —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤, –¥–µ–ø–ª–æ–π –º–æ–¥–µ–ª–µ–π |
| **engineer** | `engineer-key-123` | –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤, —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –º–æ–¥–µ–ª–µ–π |
| **viewer** | `viewer-key-123`   | –ø—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫ |

---

## üìå Roadmap (–ø–ª–∞–Ω—ã)

- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PyTorch –∏ LightGBM –º–æ–¥–µ–ª–µ–π  
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retraining (Prefect flow)  
- [ ] CI/CD –ø–∞–π–ø–ª–∞–π–Ω (GitHub Actions ‚Üí Docker Hub ‚Üí Kubernetes)  
- [ ] JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç—ã—Ö API-–∫–ª—é—á–µ–π  
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (GPU usage, model drift, data drift)  
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ multi-tenant (—Ä–∞–∑–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞)  

---

## üßë‚Äçüíª –ê–≤—Ç–æ—Ä

üë®‚Äçüíª [Morty00933](https://github.com/Morty00933)  

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –∫–∞–∫ pet-project –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞–≤—ã–∫–æ–≤ **ML Engineer / AI Infrastructure Developer**:  
- Docker, Docker Compose  
- FastAPI  
- MLflow + Optuna  
- Prefect  
- Prometheus + Grafana  
- MinIO (S3)  
- Postgres  
